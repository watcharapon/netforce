<form model="account.credit.wizard" title="Allocate Credit to Invoice">
    <field name="invoice_id" invisible="1"/>
    <template>
        <h5>
            Allocate oustanding credit to <a href="#name=view_invoice&amp;active_id={{context.data.invoice_id.0.}}"> {{context.data.invoice_id.1.}}</a>
        </h5>
    </template>
    <group form_layout="stacked">
        <field name="date" span="3"/>
    </group>
    <field name="lines" nolabel="1">
        <list>
            <field name="credit_id" action="view_invoice"/>
            <field name="date"/>
            <field name="amount_credit_remain"/>
            <field name="amount" onchange="update_amounts"/>
        </list>
    </field>
    <group offset="8" span="4" columns="1">
        <field name="amount_due"/>
        <field name="amount_alloc"/>
        <field name="amount_remain"/>
    </group>
    <foot replace="1">
        <button string="Allocate Credit" method="allocate" size="large" type="success"/>
    </foot>
</form>
